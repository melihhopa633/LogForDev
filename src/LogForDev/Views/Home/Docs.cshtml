@{
    ViewData["Title"] = "Documentation";
}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css" />

<style>
    /* ── Code blocks ─────────────────────────────── */
    .doc-code { position: relative; }
    .doc-code pre {
        margin: 0;
        padding: 0;
        border-radius: 0.5rem;
        border: 1px solid #27272a;
        overflow: hidden;
    }
    .doc-code pre code.hljs {
        padding: 1rem 1.25rem;
        padding-right: 3rem;
        font-size: 0.72rem;
        line-height: 1.75;
        background: #0e0e10 !important;
        border-radius: 0.5rem;
        display: block;
    }
    /* plain pre (no hljs) */
    .doc-code pre:not(:has(.hljs)) {
        padding: 1rem 1.25rem;
        padding-right: 3rem;
        font-size: 0.72rem;
        line-height: 1.75;
        background: #0e0e10;
        color: #e4e4e7;
        font-family: ui-monospace, SFMono-Regular, monospace;
    }

    .copy-btn {
        position: absolute;
        top: 0.5rem;
        right: 0.5rem;
        padding: 0.35rem;
        border-radius: 0.375rem;
        color: #52525b;
        background: rgba(28,28,31,0.9);
        border: 1px solid #3f3f46;
        cursor: pointer;
        transition: all 0.15s;
        z-index: 2;
        line-height: 0;
    }
    .copy-btn:hover { color: #fafafa; border-color: #71717a; }
    .copy-btn.copied { color: #4ade80; border-color: #4ade80; }

    /* ── Language tabs ───────────────────────────── */
    .lang-tabs { display: flex; border-bottom: 1px solid #27272a; overflow-x: auto; }
    .lang-tab {
        display: flex;
        align-items: center;
        gap: 0.4rem;
        padding: 0.5rem 0.875rem;
        font-size: 0.75rem;
        font-weight: 500;
        color: #52525b;
        background: transparent;
        border: none;
        border-bottom: 2px solid transparent;
        cursor: pointer;
        transition: all 0.15s;
        white-space: nowrap;
        margin-bottom: -1px;
    }
    .lang-tab:hover { color: #a1a1aa; }
    .lang-tab .lang-dot { width: 7px; height: 7px; border-radius: 50%; transition: opacity 0.15s; opacity: 0.4; }
    .lang-tab.active .lang-dot { opacity: 1; }

    /* brand colors per language */
    .lang-tab[data-lang="curl"].active  { color: #a1a1aa; border-bottom-color: #a1a1aa; }
    .lang-tab[data-lang="python"].active { color: #f5c542; border-bottom-color: #f5c542; }
    .lang-tab[data-lang="node"].active   { color: #68a063; border-bottom-color: #68a063; }
    .lang-tab[data-lang="csharp"].active { color: #b469d8; border-bottom-color: #b469d8; }
    .lang-tab[data-lang="go"].active     { color: #00acd7; border-bottom-color: #00acd7; }
    .lang-tab[data-lang="php"].active    { color: #8892c0; border-bottom-color: #8892c0; }
    .lang-tab[data-lang="java"].active   { color: #f89820; border-bottom-color: #f89820; }
    .lang-tab[data-lang="ruby"].active   { color: #cc342d; border-bottom-color: #cc342d; }

    .lang-dot-curl   { background: #a1a1aa; }
    .lang-dot-python { background: #f5c542; }
    .lang-dot-node   { background: #68a063; }
    .lang-dot-csharp { background: #b469d8; }
    .lang-dot-go     { background: #00acd7; }
    .lang-dot-php    { background: #8892c0; }
    .lang-dot-java   { background: #f89820; }
    .lang-dot-ruby   { background: #cc342d; }

    /* top border accent when active */
    .lang-panel[data-lang="python"].active  .doc-code pre { border-top-color: #f5c542; }
    .lang-panel[data-lang="node"].active    .doc-code pre { border-top-color: #68a063; }
    .lang-panel[data-lang="csharp"].active  .doc-code pre { border-top-color: #b469d8; }
    .lang-panel[data-lang="go"].active      .doc-code pre { border-top-color: #00acd7; }
    .lang-panel[data-lang="php"].active     .doc-code pre { border-top-color: #8892c0; }
    .lang-panel[data-lang="java"].active    .doc-code pre { border-top-color: #f89820; }
    .lang-panel[data-lang="ruby"].active    .doc-code pre { border-top-color: #cc342d; }

    .lang-panel { display: none; }
    .lang-panel.active { display: block; }

    /* ── Method badge ────────────────────────────── */
    .method-badge {
        display: inline-flex;
        align-items: center;
        padding: 0.125rem 0.5rem;
        border-radius: 0.375rem;
        font-size: 0.6875rem;
        font-weight: 700;
        font-family: ui-monospace, SFMono-Regular, monospace;
    }
    .method-post { background: rgba(59,130,246,0.15); color: #60a5fa; }

    /* ── Sidebar ─────────────────────────────────── */
    .sidebar-link {
        display: flex;
        align-items: center;
        padding: 0.375rem 0.75rem;
        font-size: 0.8125rem;
        color: #71717a;
        border-radius: 0.375rem;
        transition: all 0.15s;
        text-decoration: none;
        border-left: 2px solid transparent;
    }
    .sidebar-link:hover { color: #d4d4d8; background: rgba(39,39,42,0.5); }
    .sidebar-link.active { color: #fafafa; border-left-color: #3b82f6; background: rgba(59,130,246,0.08); }
    .sidebar-group {
        font-size: 0.6875rem; font-weight: 600; color: #52525b;
        text-transform: uppercase; letter-spacing: 0.08em;
        padding: 0.5rem 0.75rem; margin-top: 1rem;
    }
    .sidebar-group:first-child { margin-top: 0; }

    /* ── Param table ─────────────────────────────── */
    .param-table { width: 100%; font-size: 0.8125rem; border-collapse: collapse; }
    .param-table th {
        text-align: left; padding: 0.625rem 0.75rem;
        font-weight: 500; color: #71717a;
        background: rgba(28,28,31,0.5); border-bottom: 1px solid #27272a; font-size: 0.75rem;
    }
    .param-table td { padding: 0.625rem 0.75rem; border-bottom: 1px solid rgba(39,39,42,0.5); color: #a1a1aa; vertical-align: top; }
    .param-table tr:last-child td { border-bottom: none; }
    .param-name { font-family: ui-monospace, SFMono-Regular, monospace; font-size: 0.75rem; color: #e4e4e7; background: rgba(28,28,31,0.8); padding: 0.125rem 0.375rem; border-radius: 0.25rem; }
    .param-required { color: #f87171; font-size: 0.625rem; font-weight: 700; margin-left: 0.375rem; }
    .param-optional { color: #52525b; font-size: 0.625rem; margin-left: 0.375rem; }
    .param-type { font-family: ui-monospace, SFMono-Regular, monospace; font-size: 0.6875rem; color: #3b82f6; }

    /* ── Endpoint card ───────────────────────────── */
    .endpoint-card { border: 1px solid #27272a; border-radius: 0.5rem; overflow: hidden; background: #0e0e10; }
    .endpoint-header { display: flex; align-items: center; gap: 0.625rem; padding: 0.75rem 1rem; border-bottom: 1px solid #27272a; background: rgba(28,28,31,0.4); }
    .endpoint-path { font-family: ui-monospace, SFMono-Regular, monospace; font-size: 0.8125rem; color: #d4d4d8; }

    /* ── Callout ─────────────────────────────────── */
    .callout { padding: 0.875rem 1rem; border-radius: 0.5rem; font-size: 0.8125rem; line-height: 1.6; }
    .callout-info { background: rgba(59,130,246,0.07); border: 1px solid rgba(59,130,246,0.2); color: #93c5fd; }
    .callout-warn { background: rgba(234,179,8,0.06); border: 1px solid rgba(234,179,8,0.2); color: #fde68a; }

    /* ── Misc ────────────────────────────────────── */
    .level-dot { width: 0.5rem; height: 0.5rem; border-radius: 50%; display: inline-block; }
    .section-anchor { scroll-margin-top: 5rem; }

    /* ── Playground inputs ───────────────────────── */
    .try-input {
        width: 100%; height: 2.25rem; padding: 0 0.75rem;
        font-size: 0.8125rem; border-radius: 0.375rem;
        border: 1px solid #27272a; background: #1c1c1f;
        color: #fafafa; outline: none; transition: border-color 0.15s;
    }
    .try-input:focus { border-color: #3b82f6; }
    .try-input::placeholder { color: #52525b; }
    .try-select {
        height: 2.25rem; padding: 0 0.5rem; font-size: 0.8125rem;
        border-radius: 0.375rem; border: 1px solid #27272a;
        background: #1c1c1f; color: #fafafa; outline: none; cursor: pointer;
    }
    .try-btn {
        height: 2.25rem; padding: 0 1rem; font-size: 0.8125rem; font-weight: 500;
        border-radius: 0.375rem; border: none; background: #3b82f6; color: #fff;
        cursor: pointer; transition: background 0.15s; white-space: nowrap;
    }
    .try-btn:hover { background: #2563eb; }
</style>

<div class="flex gap-0">

    <!-- Sidebar -->
    <aside class="hidden lg:block w-56 shrink-0">
        <nav class="sticky top-20 max-h-[calc(100vh-6rem)] overflow-y-auto pb-8 pr-4 -ml-2">
            <div class="sidebar-group">Getting Started</div>
            <a href="#introduction" class="sidebar-link active" data-section="introduction">Introduction</a>
            <a href="#authentication" class="sidebar-link" data-section="authentication">Authentication</a>
            <a href="#quick-start" class="sidebar-link" data-section="quick-start">Quick Start</a>

            <div class="sidebar-group">Sending Logs</div>
            <a href="#send-log" class="sidebar-link" data-section="send-log">Send a Log</a>
            <a href="#send-batch" class="sidebar-link" data-section="send-batch">Batch Logs</a>
            <a href="#log-levels" class="sidebar-link" data-section="log-levels">Log Levels</a>
            <a href="#error-responses" class="sidebar-link" data-section="error-responses">Error Responses</a>

            <div class="sidebar-group">Integration</div>
            <a href="#examples" class="sidebar-link" data-section="examples">Code Examples</a>
            <a href="#playground" class="sidebar-link" data-section="playground">API Playground</a>
            <a href="#best-practices" class="sidebar-link" data-section="best-practices">Best Practices</a>
        </nav>
    </aside>

    <!-- Main content -->
    <div class="flex-1 min-w-0 max-w-4xl space-y-14 pb-20">

        <!-- Introduction -->
        <section id="introduction" class="section-anchor">
            <h1 class="text-2xl font-bold tracking-tight">Integration Guide</h1>
            <p class="mt-2 text-sm text-muted-foreground leading-relaxed max-w-2xl">
                Connect your application to LogForDev and monitor all your logs in one place.
                No SDK required &mdash; just a single HTTP request.
            </p>

            <div class="grid grid-cols-1 sm:grid-cols-3 gap-3 mt-6">
                <div class="border border-border rounded-lg p-4 bg-card">
                    <div class="flex items-center gap-2 mb-2">
                        <svg class="w-4 h-4 text-primary" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
                        <span class="text-sm font-medium">Integrate in 3 Steps</span>
                    </div>
                    <p class="text-xs text-muted-foreground">Create a project, get an API key, send a POST request. That's it.</p>
                </div>
                <div class="border border-border rounded-lg p-4 bg-card">
                    <div class="flex items-center gap-2 mb-2">
                        <svg class="w-4 h-4 text-primary" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
                        <span class="text-sm font-medium">Any Language</span>
                    </div>
                    <p class="text-xs text-muted-foreground">Python, Node.js, Go, C#, Java, PHP, Ruby &mdash; if it speaks HTTP, it works.</p>
                </div>
                <div class="border border-border rounded-lg p-4 bg-card">
                    <div class="flex items-center gap-2 mb-2">
                        <svg class="w-4 h-4 text-primary" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
                        <span class="text-sm font-medium">Secured by API Key</span>
                    </div>
                    <p class="text-xs text-muted-foreground">Each project has its own API key. Logs are automatically linked to the project.</p>
                </div>
            </div>
        </section>

        <!-- Authentication -->
        <section id="authentication" class="section-anchor space-y-4">
            <h2 class="text-lg font-semibold border-b border-border pb-2">1. Get Your API Key</h2>
            <p class="text-sm text-muted-foreground">
                You need an API key to send logs to LogForDev.
                Go to the <a href="/Home/Projects" class="text-primary hover:underline">Projects</a> page and create a new project &mdash; an API key is generated automatically.
            </p>

            <div class="callout callout-info">
                Click <strong>Projects &rarr; Create Project</strong>, enter a project name, and copy the generated key.
                It will start with <code class="font-mono text-xs bg-black/20 px-1 rounded">lfdev_</code>.
            </div>

            <p class="text-sm text-muted-foreground">Include the key in every request as an HTTP header:</p>
            <div class="doc-code">
                <button class="copy-btn" onclick="copyCode(this)"><svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg></button>
                <pre><code class="language-http">X-API-Key: lfdev_your-api-key-here</code></pre>
            </div>
        </section>

        <!-- Quick Start -->
        <section id="quick-start" class="section-anchor space-y-4">
            <h2 class="text-lg font-semibold border-b border-border pb-2">2. Send Your First Log</h2>
            <p class="text-sm text-muted-foreground">Send your first log with a single cURL command:</p>

            <div class="doc-code">
                <button class="copy-btn" onclick="copyCode(this)"><svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg></button>
                <pre><code class="language-bash">curl -X POST http://localhost:5000/api/logs \
  -H "Content-Type: application/json" \
  -H "X-API-Key: lfdev_your-key" \
  -d '{
    "level": "info",
    "message": "Hello from LogForDev!",
    "appName": "my-app"
  }'</code></pre>
            </div>

            <p class="text-sm text-muted-foreground">Success response:</p>
            <div class="doc-code">
                <pre><code class="language-json">{
  "success": true,
  "id": "550e8400-e29b-41d4-a716-446655440000"
}</code></pre>
            </div>

            <p class="text-sm text-muted-foreground">Done. Your log is now visible on the <a href="/" class="text-primary hover:underline">Dashboard</a>.</p>
        </section>

        <!-- Divider -->
        <div class="border-t border-border pt-2">
            <h3 class="text-xs font-semibold text-muted-foreground uppercase tracking-widest">Sending Logs</h3>
        </div>

        <!-- POST /api/logs -->
        <section id="send-log" class="section-anchor space-y-4">
            <h2 class="text-lg font-semibold border-b border-border pb-2">Send a Log</h2>
            <div class="endpoint-card">
                <div class="endpoint-header">
                    <span class="method-badge method-post">POST</span>
                    <span class="endpoint-path">/api/logs</span>
                </div>
                <div class="p-4 space-y-4">
                    <p class="text-sm text-muted-foreground">Send a single log entry from your application.</p>
                    <h4 class="text-xs font-semibold text-muted-foreground uppercase tracking-wider">Request Body</h4>
                    <div class="rounded-lg border border-border overflow-hidden">
                        <table class="param-table">
                            <thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead>
                            <tbody>
                                <tr>
                                    <td><span class="param-name">level</span><span class="param-required">REQUIRED</span></td>
                                    <td><span class="param-type">string</span></td>
                                    <td>Log severity: <code>trace</code>, <code>debug</code>, <code>info</code>, <code>warning</code>, <code>error</code>, <code>fatal</code></td>
                                </tr>
                                <tr>
                                    <td><span class="param-name">message</span><span class="param-required">REQUIRED</span></td>
                                    <td><span class="param-type">string</span></td>
                                    <td>The log message</td>
                                </tr>
                                <tr>
                                    <td><span class="param-name">appName</span><span class="param-required">REQUIRED</span></td>
                                    <td><span class="param-type">string</span></td>
                                    <td>Your application or service name</td>
                                </tr>
                                <tr>
                                    <td><span class="param-name">metadata</span><span class="param-optional">optional</span></td>
                                    <td><span class="param-type">object</span></td>
                                    <td>Extra context as JSON (userId, orderId, duration, etc.)</td>
                                </tr>
                                <tr>
                                    <td><span class="param-name">traceId</span><span class="param-optional">optional</span></td>
                                    <td><span class="param-type">string</span></td>
                                    <td>Distributed trace ID &mdash; correlate logs across multiple services</td>
                                </tr>
                                <tr>
                                    <td><span class="param-name">spanId</span><span class="param-optional">optional</span></td>
                                    <td><span class="param-type">string</span></td>
                                    <td>Span ID &mdash; used together with traceId</td>
                                </tr>
                                <tr>
                                    <td><span class="param-name">environment</span><span class="param-optional">optional</span></td>
                                    <td><span class="param-type">string</span></td>
                                    <td>Deployment environment. Defaults to <code>production</code></td>
                                </tr>
                                <tr>
                                    <td><span class="param-name">host</span><span class="param-optional">optional</span></td>
                                    <td><span class="param-type">string</span></td>
                                    <td>Server hostname. Falls back to client IP if omitted</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <h4 class="text-xs font-semibold text-muted-foreground uppercase tracking-wider">Full Example</h4>
                    <div class="doc-code">
                        <button class="copy-btn" onclick="copyCode(this)"><svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg></button>
                        <pre><code class="language-bash">curl -X POST http://localhost:5000/api/logs \
  -H "Content-Type: application/json" \
  -H "X-API-Key: lfdev_your-key" \
  -d '{
    "level": "error",
    "message": "Payment processing failed",
    "appName": "payment-service",
    "environment": "production",
    "metadata": {
      "orderId": 4521,
      "amount": 29.99,
      "reason": "insufficient_funds"
    },
    "traceId": "req-abc-123",
    "spanId": "span-456"
  }'</code></pre>
                    </div>

                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                        <div>
                            <h4 class="text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2">Success <span class="text-green-400">200</span></h4>
                            <div class="doc-code"><pre><code class="language-json">{
  "success": true,
  "id": "550e8400-e29b-41d4-..."
}</code></pre></div>
                        </div>
                        <div>
                            <h4 class="text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2">Error <span class="text-red-400">400</span></h4>
                            <div class="doc-code"><pre><code class="language-json">{
  "success": false,
  "error": "Invalid log level"
}</code></pre></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- POST /api/logs/batch -->
        <section id="send-batch" class="section-anchor space-y-4">
            <h2 class="text-lg font-semibold border-b border-border pb-2">Batch Logs</h2>
            <div class="endpoint-card">
                <div class="endpoint-header">
                    <span class="method-badge method-post">POST</span>
                    <span class="endpoint-path">/api/logs/batch</span>
                </div>
                <div class="p-4 space-y-4">
                    <p class="text-sm text-muted-foreground">Send multiple log entries in a single request. Recommended for high-traffic applications.</p>

                    <h4 class="text-xs font-semibold text-muted-foreground uppercase tracking-wider">Request Body</h4>
                    <div class="doc-code">
                        <button class="copy-btn" onclick="copyCode(this)"><svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg></button>
                        <pre><code class="language-json">{
  "logs": [
    {
      "level": "info",
      "message": "Order received",
      "appName": "order-service",
      "traceId": "trace-001",
      "metadata": { "orderId": 789 }
    },
    {
      "level": "debug",
      "message": "Processing payment",
      "appName": "payment-service",
      "traceId": "trace-001"
    },
    {
      "level": "info",
      "message": "Order completed in 145ms",
      "appName": "order-service",
      "traceId": "trace-001"
    }
  ]
}</code></pre>
                    </div>

                    <h4 class="text-xs font-semibold text-muted-foreground uppercase tracking-wider">Response <span class="text-green-400">200</span></h4>
                    <div class="doc-code"><pre><code class="language-json">{
  "success": true,
  "count": 3
}</code></pre></div>

                    <div class="callout callout-info">
                        <strong>Performance tip:</strong> Buffer logs locally and send in groups of 100&ndash;500. This reduces HTTP overhead by 10&ndash;50x.
                    </div>
                </div>
            </div>
        </section>

        <!-- Log Levels -->
        <section id="log-levels" class="section-anchor space-y-4">
            <h2 class="text-lg font-semibold border-b border-border pb-2">Log Levels</h2>
            <p class="text-sm text-muted-foreground">Use one of the following values in the <code class="font-mono text-xs bg-muted px-1 rounded">level</code> field (case-insensitive):</p>
            <div class="rounded-lg border border-border overflow-hidden">
                <table class="param-table">
                    <thead><tr><th>Level</th><th>Value</th><th>When to use</th></tr></thead>
                    <tbody>
                        <tr>
                            <td><span class="inline-flex items-center gap-1.5"><span class="level-dot" style="background:#71717a"></span><span class="text-zinc-400 text-xs font-semibold">trace</span></span></td>
                            <td><code class="font-mono text-xs">"level": "trace"</code></td>
                            <td>Most granular info, development only</td>
                        </tr>
                        <tr>
                            <td><span class="inline-flex items-center gap-1.5"><span class="level-dot" style="background:#60a5fa"></span><span class="text-blue-400 text-xs font-semibold">debug</span></span></td>
                            <td><code class="font-mono text-xs">"level": "debug"</code></td>
                            <td>Useful when actively debugging an issue</td>
                        </tr>
                        <tr>
                            <td><span class="inline-flex items-center gap-1.5"><span class="level-dot" style="background:#4ade80"></span><span class="text-green-400 text-xs font-semibold">info</span></span></td>
                            <td><code class="font-mono text-xs">"level": "info"</code></td>
                            <td>Normal operational events (login, request completed, etc.)</td>
                        </tr>
                        <tr>
                            <td><span class="inline-flex items-center gap-1.5"><span class="level-dot" style="background:#facc15"></span><span class="text-yellow-400 text-xs font-semibold">warning</span></span></td>
                            <td><code class="font-mono text-xs">"level": "warning"</code></td>
                            <td>Something needs attention (disk nearly full, rate limit approaching)</td>
                        </tr>
                        <tr>
                            <td><span class="inline-flex items-center gap-1.5"><span class="level-dot" style="background:#f87171"></span><span class="text-red-400 text-xs font-semibold">error</span></span></td>
                            <td><code class="font-mono text-xs">"level": "error"</code></td>
                            <td>Something went wrong but the app keeps running</td>
                        </tr>
                        <tr>
                            <td><span class="inline-flex items-center gap-1.5"><span class="level-dot" style="background:#ef4444"></span><span class="text-red-500 text-xs font-semibold">fatal</span></span></td>
                            <td><code class="font-mono text-xs">"level": "fatal"</code></td>
                            <td>Critical failure — app is down or cannot continue</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Error Responses -->
        <section id="error-responses" class="section-anchor space-y-4">
            <h2 class="text-lg font-semibold border-b border-border pb-2">Error Responses</h2>
            <p class="text-sm text-muted-foreground">All errors return a consistent JSON format:</p>

            <div class="space-y-3">
                <div class="rounded-lg border border-border overflow-hidden">
                    <div class="px-4 py-2.5 bg-muted/30 border-b border-border flex items-center gap-2">
                        <span class="text-xs font-bold text-red-400">401</span>
                        <span class="text-xs text-muted-foreground">Unauthorized — API key missing or invalid</span>
                    </div>
                    <div class="doc-code"><pre><code class="language-json">{ "success": false, "error": "Missing or invalid API key" }</code></pre></div>
                </div>

                <div class="rounded-lg border border-border overflow-hidden">
                    <div class="px-4 py-2.5 bg-muted/30 border-b border-border flex items-center gap-2">
                        <span class="text-xs font-bold text-yellow-400">400</span>
                        <span class="text-xs text-muted-foreground">Bad Request — missing or invalid field</span>
                    </div>
                    <div class="doc-code"><pre><code class="language-json">{ "success": false, "error": "Invalid log level. Valid: Trace, Debug, Info, Warning, Error, Fatal" }</code></pre></div>
                </div>

                <div class="rounded-lg border border-border overflow-hidden">
                    <div class="px-4 py-2.5 bg-muted/30 border-b border-border flex items-center gap-2">
                        <span class="text-xs font-bold text-red-500">500</span>
                        <span class="text-xs text-muted-foreground">Internal Server Error</span>
                    </div>
                    <div class="doc-code"><pre><code class="language-json">{ "success": false, "error": "Internal server error" }</code></pre></div>
                </div>
            </div>

            <div class="callout callout-warn">
                <strong>Getting 401?</strong> Your API key must start with <code class="font-mono text-xs bg-black/20 px-1 rounded">lfdev_</code> and be sent in the <code class="font-mono text-xs bg-black/20 px-1 rounded">X-API-Key</code> header.
            </div>
        </section>

        <!-- Divider -->
        <div class="border-t border-border pt-2">
            <h3 class="text-xs font-semibold text-muted-foreground uppercase tracking-widest">Integration</h3>
        </div>

        <!-- Code Examples -->
        <section id="examples" class="section-anchor space-y-4">
            <h2 class="text-lg font-semibold border-b border-border pb-2">Code Examples</h2>
            <p class="text-sm text-muted-foreground">Copy, paste, run. Every example includes error handling and retry logic.</p>

            <div class="rounded-lg border border-border overflow-hidden" id="langExamples">
                <div class="lang-tabs">
                    <button class="lang-tab active" data-lang="curl" onclick="switchLang('curl')">
                        <span class="lang-dot lang-dot-curl"></span>cURL
                    </button>
                    <button class="lang-tab" data-lang="python" onclick="switchLang('python')">
                        <span class="lang-dot lang-dot-python"></span>Python
                    </button>
                    <button class="lang-tab" data-lang="node" onclick="switchLang('node')">
                        <span class="lang-dot lang-dot-node"></span>Node.js
                    </button>
                    <button class="lang-tab" data-lang="csharp" onclick="switchLang('csharp')">
                        <span class="lang-dot lang-dot-csharp"></span>C#
                    </button>
                    <button class="lang-tab" data-lang="go" onclick="switchLang('go')">
                        <span class="lang-dot lang-dot-go"></span>Go
                    </button>
                    <button class="lang-tab" data-lang="php" onclick="switchLang('php')">
                        <span class="lang-dot lang-dot-php"></span>PHP
                    </button>
                    <button class="lang-tab" data-lang="java" onclick="switchLang('java')">
                        <span class="lang-dot lang-dot-java"></span>Java
                    </button>
                    <button class="lang-tab" data-lang="ruby" onclick="switchLang('ruby')">
                        <span class="lang-dot lang-dot-ruby"></span>Ruby
                    </button>
                </div>

                <!-- cURL -->
                <div class="lang-panel active" data-lang="curl">
                    <div class="doc-code">
                        <button class="copy-btn" onclick="copyCode(this)"><svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg></button>
                        <pre><code class="language-bash"># Send a single log
curl -X POST http://localhost:5000/api/logs \
  -H "Content-Type: application/json" \
  -H "X-API-Key: lfdev_your-key" \
  -d '{
    "level": "info",
    "message": "User signed up",
    "appName": "auth-service",
    "environment": "production",
    "metadata": {"userId": 42, "plan": "pro"}
  }'

# Send a batch
curl -X POST http://localhost:5000/api/logs/batch \
  -H "Content-Type: application/json" \
  -H "X-API-Key: lfdev_your-key" \
  -d '{
    "logs": [
      {"level":"info",  "message":"Request received",       "appName":"api", "traceId":"t-1"},
      {"level":"debug", "message":"DB query completed 12ms","appName":"api", "traceId":"t-1"},
      {"level":"info",  "message":"Response sent 200",      "appName":"api", "traceId":"t-1"}
    ]
  }'</code></pre>
                    </div>
                </div>

                <!-- Python -->
                <div class="lang-panel" data-lang="python">
                    <div class="doc-code">
                        <button class="copy-btn" onclick="copyCode(this)"><svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg></button>
                        <pre><code class="language-python">import requests
import time

LOGFORDEV_URL = "http://localhost:5000"
API_KEY       = "lfdev_your-key"
APP_NAME      = "my-python-app"

session = requests.Session()
session.headers.update({
    "Content-Type": "application/json",
    "X-API-Key": API_KEY,
})

def send_log(level, message, metadata=None, trace_id=None,
             environment="production", retries=3):
    """Send a single log to LogForDev with automatic retry."""
    payload = {
        "level": level, "message": message,
        "appName": APP_NAME, "environment": environment,
    }
    if metadata:  payload["metadata"]  = metadata
    if trace_id:  payload["traceId"]   = trace_id

    for attempt in range(retries):
        try:
            r = session.post(f"{LOGFORDEV_URL}/api/logs", json=payload, timeout=5)
            if r.status_code == 200:
                return r.json()
        except requests.RequestException:
            pass
        if attempt < retries - 1:
            time.sleep(2 ** attempt)   # 1s, 2s, 4s ...
    return None

def send_batch(logs, retries=3):
    """Send multiple logs in a single request."""
    for log in logs:
        log.setdefault("appName",     APP_NAME)
        log.setdefault("environment", "production")

    for attempt in range(retries):
        try:
            r = session.post(
                f"{LOGFORDEV_URL}/api/logs/batch",
                json={"logs": logs}, timeout=10,
            )
            if r.status_code == 200:
                return r.json()
        except requests.RequestException:
            pass
        if attempt < retries - 1:
            time.sleep(2 ** attempt)
    return None


# ── Usage ─────────────────────────────────────────
send_log("info",  "User signed up",   metadata={"user_id": 42})
send_log("error", "Payment failed",   metadata={"order": 123}, trace_id="req-001")

send_batch([
    {"level": "info",  "message": "Job started"},
    {"level": "debug", "message": "Processing 500 items"},
    {"level": "info",  "message": "Job completed in 3.2s"},
])</code></pre>
                    </div>
                </div>

                <!-- Node.js -->
                <div class="lang-panel" data-lang="node">
                    <div class="doc-code">
                        <button class="copy-btn" onclick="copyCode(this)"><svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg></button>
                        <pre><code class="language-javascript">const LOGFORDEV_URL = "http://localhost:5000";
const API_KEY       = "lfdev_your-key";
const APP_NAME      = "my-node-app";

const headers = {
  "Content-Type": "application/json",
  "X-API-Key": API_KEY,
};

async function sendLog(level, message, opts = {}) {
  const { metadata, traceId, environment = "production", retries = 3 } = opts;
  const body = JSON.stringify({
    level, message, appName: APP_NAME, environment,
    ...(metadata && { metadata }),
    ...(traceId  && { traceId }),
  });

  for (let i = 0; i < retries; i++) {
    try {
      const res = await fetch(`${LOGFORDEV_URL}/api/logs`, { method: "POST", headers, body });
      if (res.ok) return await res.json();
    } catch {}
    if (i < retries - 1) await new Promise(r => setTimeout(r, 2 ** i * 1000));
  }
  return null;
}

async function sendBatch(logs, retries = 3) {
  const enriched = logs.map(l => ({ appName: APP_NAME, environment: "production", ...l }));

  for (let i = 0; i < retries; i++) {
    try {
      const res = await fetch(`${LOGFORDEV_URL}/api/logs/batch`, {
        method: "POST", headers,
        body: JSON.stringify({ logs: enriched }),
      });
      if (res.ok) return await res.json();
    } catch {}
    if (i < retries - 1) await new Promise(r => setTimeout(r, 2 ** i * 1000));
  }
  return null;
}


// ── Usage ─────────────────────────────────────────
await sendLog("info", "Server started on port 3000");
await sendLog("error", "DB connection lost", {
  metadata: { host: "db-primary", retryIn: 5 },
  traceId:  "req-xyz",
});

await sendBatch([
  { level: "info",  message: "Cron job started" },
  { level: "info",  message: "Processed 1200 records" },
  { level: "info",  message: "Cron job finished in 4.1s" },
]);</code></pre>
                    </div>
                </div>

                <!-- C# -->
                <div class="lang-panel" data-lang="csharp">
                    <div class="doc-code">
                        <button class="copy-btn" onclick="copyCode(this)"><svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg></button>
                        <pre><code class="language-csharp">using System.Net.Http.Json;

public class LogForDev : IDisposable
{
    private readonly HttpClient _http;
    private readonly string _appName;
    private readonly string _env;
    private readonly int _retries;

    public LogForDev(string url, string apiKey, string appName,
        string env = "production", int retries = 3)
    {
        _appName  = appName;
        _env      = env;
        _retries  = retries;
        _http     = new HttpClient { BaseAddress = new Uri(url) };
        _http.DefaultRequestHeaders.Add("X-API-Key", apiKey);
    }

    public async Task&lt;bool&gt; SendAsync(string level, string message,
        object? metadata = null, string? traceId = null)
    {
        var payload = new { level, message, appName = _appName,
                            environment = _env, metadata, traceId };

        for (int i = 0; i &lt; _retries; i++)
        {
            try
            {
                var resp = await _http.PostAsJsonAsync("/api/logs", payload);
                if (resp.IsSuccessStatusCode) return true;
            }
            catch (HttpRequestException) { }

            if (i &lt; _retries - 1)
                await Task.Delay(TimeSpan.FromSeconds(Math.Pow(2, i)));
        }
        return false;
    }

    public async Task&lt;bool&gt; SendBatchAsync(object[] logs)
    {
        var resp = await _http.PostAsJsonAsync("/api/logs/batch", new { logs });
        return resp.IsSuccessStatusCode;
    }

    public void Dispose() =&gt; _http.Dispose();
}


// ── Usage ─────────────────────────────────────────
using var log = new LogForDev(
    "http://localhost:5000", "lfdev_your-key", "my-dotnet-app"
);

await log.SendAsync("info", "Application started");
await log.SendAsync("error", "Payment failed",
    metadata: new { OrderId = 123, Amount = 29.99 },
    traceId: "req-001");</code></pre>
                    </div>
                </div>

                <!-- Go -->
                <div class="lang-panel" data-lang="go">
                    <div class="doc-code">
                        <button class="copy-btn" onclick="copyCode(this)"><svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg></button>
                        <pre><code class="language-go">package main

import (
    "bytes"
    "encoding/json"
    "fmt"
    "net/http"
    "time"
)

var (
    logfordevURL = "http://localhost:5000"
    apiKey       = "lfdev_your-key"
    appName      = "my-go-app"
    httpClient   = &http.Client{Timeout: 5 * time.Second}
    maxRetries   = 3
)

func sendLog(level, message string, metadata map[string]any, traceID string) error {
    payload := map[string]any{
        "level":       level,
        "message":     message,
        "appName":     appName,
        "environment": "production",
    }
    if metadata != nil { payload["metadata"] = metadata }
    if traceID != ""   { payload["traceId"]  = traceID  }

    body, _ := json.Marshal(payload)

    for i := 0; i &lt; maxRetries; i++ {
        req, _ := http.NewRequest("POST", logfordevURL+"/api/logs", bytes.NewReader(body))
        req.Header.Set("Content-Type", "application/json")
        req.Header.Set("X-API-Key", apiKey)

        resp, err := httpClient.Do(req)
        if err == nil && resp.StatusCode == 200 {
            resp.Body.Close()
            return nil
        }
        if resp != nil { resp.Body.Close() }
        time.Sleep(time.Duration(1&lt;&lt;i) * time.Second)
    }
    return fmt.Errorf("failed after %d retries", maxRetries)
}


// ── Usage ─────────────────────────────────────────
func main() {
    sendLog("info", "Server started", nil, "")
    sendLog("error", "Redis timeout",
        map[string]any{"host": "redis:6379", "retryIn": 5},
        "req-001",
    )
}</code></pre>
                    </div>
                </div>

                <!-- PHP -->
                <div class="lang-panel" data-lang="php">
                    <div class="doc-code">
                        <button class="copy-btn" onclick="copyCode(this)"><svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg></button>
                        <pre><code class="language-php">&lt;?php

function sendLog(
    string $level,
    string $message,
    ?array $metadata = null,
    ?string $traceId = null
): ?array {
    $url    = 'http://localhost:5000/api/logs';
    $apiKey = 'lfdev_your-key';

    $payload = [
        'level'       => $level,
        'message'     => $message,
        'appName'     => 'my-php-app',
        'environment' => 'production',
    ];
    if ($metadata) $payload['metadata'] = $metadata;
    if ($traceId)  $payload['traceId']  = $traceId;

    for ($i = 0; $i &lt; 3; $i++) {
        $ch = curl_init($url);
        curl_setopt_array($ch, [
            CURLOPT_POST           => true,
            CURLOPT_RETURNTRANSFER => true,
            CURLOPT_TIMEOUT        => 5,
            CURLOPT_HTTPHEADER     => [
                'Content-Type: application/json',
                'X-API-Key: ' . $apiKey,
            ],
            CURLOPT_POSTFIELDS => json_encode($payload),
        ]);
        $response = curl_exec($ch);
        $code     = curl_getinfo($ch, CURLINFO_HTTP_CODE);
        curl_close($ch);

        if ($code === 200) return json_decode($response, true);
        if ($i &lt; 2) sleep(2 ** $i);   // 1s, 2s ...
    }
    return null;
}


// ── Usage ─────────────────────────────────────────
sendLog('info',  'User registered',  ['userId' => 42]);
sendLog('error', 'Email delivery failed',
    ['to' => 'user@example.com'], 'req-001');</code></pre>
                    </div>
                </div>

                <!-- Java -->
                <div class="lang-panel" data-lang="java">
                    <div class="doc-code">
                        <button class="copy-btn" onclick="copyCode(this)"><svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg></button>
                        <pre><code class="language-java">import java.net.URI;
import java.net.http.*;
import java.time.Duration;
import com.google.gson.Gson;
import java.util.*;

public class LogForDev {

    private final String      url;
    private final String      apiKey;
    private final String      appName;
    private final HttpClient  client;
    private final Gson        gson       = new Gson();
    private static final int  MAX_TRIES  = 3;

    public LogForDev(String url, String apiKey, String appName) {
        this.url     = url;
        this.apiKey  = apiKey;
        this.appName = appName;
        this.client  = HttpClient.newBuilder()
            .connectTimeout(Duration.ofSeconds(5))
            .build();
    }

    public boolean send(String level, String message,
                        Map&lt;String, Object&gt; metadata, String traceId) {
        var payload = new HashMap&lt;String, Object&gt;();
        payload.put("level",       level);
        payload.put("message",     message);
        payload.put("appName",     appName);
        payload.put("environment", "production");
        if (metadata != null) payload.put("metadata", metadata);
        if (traceId  != null) payload.put("traceId",  traceId);

        var body = gson.toJson(payload);

        for (int i = 0; i &lt; MAX_TRIES; i++) {
            try {
                var req = HttpRequest.newBuilder()
                    .uri(URI.create(url + "/api/logs"))
                    .header("Content-Type", "application/json")
                    .header("X-API-Key", apiKey)
                    .POST(HttpRequest.BodyPublishers.ofString(body))
                    .build();
                var resp = client.send(req, HttpResponse.BodyHandlers.ofString());
                if (resp.statusCode() == 200) return true;
            } catch (Exception ignored) {}
            if (i &lt; MAX_TRIES - 1) {
                try { Thread.sleep((long) Math.pow(2, i) * 1000); }
                catch (InterruptedException ignored) {}
            }
        }
        return false;
    }
}


// ── Usage ─────────────────────────────────────────
var log = new LogForDev("http://localhost:5000", "lfdev_your-key", "my-java-app");

log.send("info",  "App started",    null, null);
log.send("error", "Order failed",
    Map.of("orderId", 123, "reason", "timeout"), "req-001");</code></pre>
                    </div>
                </div>

                <!-- Ruby -->
                <div class="lang-panel" data-lang="ruby">
                    <div class="doc-code">
                        <button class="copy-btn" onclick="copyCode(this)"><svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg></button>
                        <pre><code class="language-ruby">require 'net/http'
require 'json'
require 'uri'

LOGFORDEV_URL = 'http://localhost:5000'
API_KEY       = 'lfdev_your-key'
APP_NAME      = 'my-rails-app'
MAX_RETRIES   = 3

def send_log(level, message, metadata: nil, trace_id: nil)
  uri     = URI("#{LOGFORDEV_URL}/api/logs")
  payload = {
    level: level, message: message,
    appName: APP_NAME, environment: 'production',
  }
  payload[:metadata] = metadata if metadata
  payload[:traceId]  = trace_id if trace_id

  MAX_RETRIES.times do |i|
    begin
      http            = Net::HTTP.new(uri.host, uri.port)
      http.open_timeout = 5
      http.read_timeout = 5

      req                  = Net::HTTP::Post.new(uri.path)
      req['Content-Type']  = 'application/json'
      req['X-API-Key']     = API_KEY
      req.body             = payload.to_json

      resp = http.request(req)
      return JSON.parse(resp.body) if resp.code == '200'
    rescue StandardError
      sleep(2**i) if i &lt; MAX_RETRIES - 1
    end
  end
  nil
end


# ── Usage ─────────────────────────────────────────
send_log('info',  'User signed in',   metadata: { user_id: 42 })
send_log('error', 'Stripe webhook failed',
         metadata: { event: 'charge.failed' }, trace_id: 'req-001')</code></pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- API Playground -->
        <section id="playground" class="section-anchor space-y-4">
            <h2 class="text-lg font-semibold border-b border-border pb-2">API Playground</h2>
            <p class="text-sm text-muted-foreground">Test the API directly from your browser.</p>

            <div class="border border-border rounded-lg bg-card p-5 space-y-4">
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                    <div>
                        <label class="block text-xs font-medium text-muted-foreground mb-1.5">API Key</label>
                        <input type="text" id="tryApiKey" placeholder="lfdev_your-key" class="try-input font-mono" />
                    </div>
                    <div>
                        <label class="block text-xs font-medium text-muted-foreground mb-1.5">App Name</label>
                        <input type="text" id="tryAppName" value="docs-playground" class="try-input" />
                    </div>
                </div>
                <div>
                    <label class="block text-xs font-medium text-muted-foreground mb-1.5">Message</label>
                    <input type="text" id="tryMessage" value="Hello from LogForDev!" class="try-input" />
                </div>
                <div class="grid grid-cols-2 sm:grid-cols-4 gap-3">
                    <div>
                        <label class="block text-xs font-medium text-muted-foreground mb-1.5">Level</label>
                        <select id="tryLevel" class="try-select w-full">
                            <option value="info">info</option>
                            <option value="debug">debug</option>
                            <option value="warning">warning</option>
                            <option value="error">error</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-xs font-medium text-muted-foreground mb-1.5">Environment</label>
                        <select id="tryEnv" class="try-select w-full">
                            <option value="test">test</option>
                            <option value="development">development</option>
                            <option value="production">production</option>
                        </select>
                    </div>
                    <div class="col-span-2 flex items-end">
                        <button onclick="sendTestLog()" class="try-btn w-full">Send Log</button>
                    </div>
                </div>

                <div id="tryResult" class="hidden">
                    <div class="flex items-center justify-between mb-1.5">
                        <span class="text-xs font-medium text-muted-foreground">Response</span>
                        <span id="tryStatus" class="text-xs font-mono"></span>
                    </div>
                    <div class="doc-code"><pre><code id="tryOutput" class="language-json !border-0"></code></pre></div>
                </div>
            </div>
        </section>

        <!-- Best Practices -->
        <section id="best-practices" class="section-anchor space-y-4">
            <h2 class="text-lg font-semibold border-b border-border pb-2">Best Practices</h2>

            <div class="space-y-3">
                <div class="border border-border rounded-lg p-4 bg-card">
                    <div class="flex items-start gap-3">
                        <span class="text-primary font-semibold mt-0.5 w-5 shrink-0">1</span>
                        <div>
                            <h4 class="text-sm font-medium">Use batch endpoint for high throughput</h4>
                            <p class="text-xs text-muted-foreground mt-1">Buffer logs locally and send groups of 100&ndash;500 to <code class="font-mono text-xs bg-muted px-1 rounded">/api/logs/batch</code>. Reduces HTTP overhead by 10&ndash;50x.</p>
                        </div>
                    </div>
                </div>

                <div class="border border-border rounded-lg p-4 bg-card">
                    <div class="flex items-start gap-3">
                        <span class="text-primary font-semibold mt-0.5 w-5 shrink-0">2</span>
                        <div>
                            <h4 class="text-sm font-medium">Link services with trace IDs</h4>
                            <p class="text-xs text-muted-foreground mt-1">Generate a unique <code class="font-mono text-xs bg-muted px-1 rounded">traceId</code> per request and propagate it across all services. The dashboard shows the full request journey.</p>
                        </div>
                    </div>
                </div>

                <div class="border border-border rounded-lg p-4 bg-card">
                    <div class="flex items-start gap-3">
                        <span class="text-primary font-semibold mt-0.5 w-5 shrink-0">3</span>
                        <div>
                            <h4 class="text-sm font-medium">Put context in metadata, not the message</h4>
                            <p class="text-xs text-muted-foreground mt-1">Structured data is far easier to filter and analyze.</p>
                            <div class="doc-code mt-2">
                                <pre><code class="language-json">// ✅ Good
{ "message": "Payment failed", "metadata": { "orderId": 123, "reason": "timeout" } }

// ❌ Bad
{ "message": "Payment failed for order 123: timeout" }</code></pre>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="border border-border rounded-lg p-4 bg-card">
                    <div class="flex items-start gap-3">
                        <span class="text-primary font-semibold mt-0.5 w-5 shrink-0">4</span>
                        <div>
                            <h4 class="text-sm font-medium">Retry with exponential backoff</h4>
                            <p class="text-xs text-muted-foreground mt-1">Network hiccups happen. All code examples above include retry logic with backoff (1s → 2s → 4s).</p>
                        </div>
                    </div>
                </div>

                <div class="border border-border rounded-lg p-4 bg-card">
                    <div class="flex items-start gap-3">
                        <span class="text-primary font-semibold mt-0.5 w-5 shrink-0">5</span>
                        <div>
                            <h4 class="text-sm font-medium">Never log sensitive data</h4>
                            <p class="text-xs text-muted-foreground mt-1">Passwords, tokens, credit card numbers, and PII should never appear in logs.</p>
                        </div>
                    </div>
                </div>

                <div class="border border-border rounded-lg p-4 bg-card">
                    <div class="flex items-start gap-3">
                        <span class="text-primary font-semibold mt-0.5 w-5 shrink-0">6</span>
                        <div>
                            <h4 class="text-sm font-medium">Choose the right log level</h4>
                            <p class="text-xs text-muted-foreground mt-1">Reserve <code class="font-mono text-xs bg-muted px-1 rounded">error</code> and <code class="font-mono text-xs bg-muted px-1 rounded">fatal</code> for genuine problems. Over-using them causes alert fatigue.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </div>
</div>

@section Scripts {
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script>
    // Initialize syntax highlighting
    document.addEventListener('DOMContentLoaded', () => {
        document.querySelectorAll('pre code').forEach(block => {
            hljs.highlightElement(block);
        });
    });

    // ── Copy to clipboard ──────────────────────────
    const copyIcon = `<svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>`;
    const checkIcon = `<svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>`;

    function copyCode(btn) {
        const pre  = btn.closest('.doc-code').querySelector('pre');
        const text = pre.innerText; // innerText strips HTML spans
        navigator.clipboard.writeText(text).then(() => {
            btn.classList.add('copied');
            btn.innerHTML = checkIcon;
            setTimeout(() => {
                btn.classList.remove('copied');
                btn.innerHTML = copyIcon;
            }, 2000);
        });
    }

    // ── Language tabs ──────────────────────────────
    function switchLang(lang) {
        document.querySelectorAll('#langExamples .lang-tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('#langExamples .lang-panel').forEach(p => p.classList.remove('active'));

        const tab   = document.querySelector(`#langExamples .lang-tab[data-lang="${lang}"]`);
        const panel = document.querySelector(`#langExamples .lang-panel[data-lang="${lang}"]`);
        tab.classList.add('active');
        panel.classList.add('active');

        // Re-highlight newly visible code blocks
        panel.querySelectorAll('pre code').forEach(block => {
            if (!block.classList.contains('hljs')) hljs.highlightElement(block);
        });
    }

    // ── Sidebar active state on scroll ─────────────
    const sections    = document.querySelectorAll('.section-anchor');
    const sidebarLinks = document.querySelectorAll('.sidebar-link');

    const observer = new IntersectionObserver(entries => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                sidebarLinks.forEach(l => l.classList.remove('active'));
                const link = document.querySelector(`.sidebar-link[data-section="${entry.target.id}"]`);
                if (link) link.classList.add('active');
            }
        });
    }, { rootMargin: '-80px 0px -70% 0px', threshold: 0 });

    sections.forEach(s => observer.observe(s));

    // ── Smooth scroll ──────────────────────────────
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            document.querySelector(this.getAttribute('href'))
                    ?.scrollIntoView({ behavior: 'smooth', block: 'start' });
        });
    });

    // ── API Playground ─────────────────────────────
    async function sendTestLog() {
        const apiKey  = document.getElementById('tryApiKey').value;
        const appName = document.getElementById('tryAppName').value || 'docs-playground';
        const message = document.getElementById('tryMessage').value;
        const level   = document.getElementById('tryLevel').value;
        const env     = document.getElementById('tryEnv').value;
        const result  = document.getElementById('tryResult');
        const output  = document.getElementById('tryOutput');
        const status  = document.getElementById('tryStatus');

        if (!message) {
            result.classList.remove('hidden');
            status.textContent = 'Error';
            status.style.color = '#f87171';
            output.textContent = 'Please enter a message.';
            return;
        }

        try {
            const hdrs = { 'Content-Type': 'application/json' };
            if (apiKey) hdrs['X-API-Key'] = apiKey;

            const res  = await fetch('/api/logs', {
                method: 'POST', headers: hdrs,
                body: JSON.stringify({ level, message, appName, environment: env }),
            });
            const data = await res.json();

            result.classList.remove('hidden');
            output.textContent = JSON.stringify(data, null, 2);
            hljs.highlightElement(output);

            status.textContent = res.ok ? `${res.status} OK` : `${res.status} ${res.statusText}`;
            status.style.color = res.ok ? '#4ade80' : '#f87171';
        } catch (err) {
            result.classList.remove('hidden');
            status.textContent = 'Network Error';
            status.style.color = '#f87171';
            output.textContent = err.message;
        }
    }
</script>
}
